<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cipher || ArkTek Innovations</title>
    <style>
        :root {
            --bg-dark: #000000;
            --text-light: #FFFFFF;
            --accent: #00CC66;
            --input-bg: #1A1A1A;
            --secondary: #333333;
            --error: #FF4D4D;
        }
        body {
            background: var(--bg-dark);
            color: var(--text-light);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            min-height: 90vh;
            max-width: 800px;
            margin: 0 auto;
        }
        header {
            text-align: center;
            margin-bottom: 20px;
        }
        .logo {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        #chat-container {
            flex: 1;
            overflow-y: auto;
            border: 1px solid var(--secondary);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            background: var(--bg-dark);
            font-size: 16px;
            display: flex;
            flex-direction: column;
        }
        .message {
            margin: 12px 0;
            line-height: 1.5;
            max-width: 80%;
            padding: 10px 15px;
            border-radius: 8px;
        }
        .user-message {
            align-self: flex-end;
            background-color: #1A3B2F;
            color: var(--text-light);
            border-bottom-right-radius: 2px;
        }
        .bot-message {
            align-self: flex-start;
            background-color: var(--secondary);
            color: var(--accent);
            border-bottom-left-radius: 2px;
        }
        .architect-message {
            align-self: flex-start;
            background-color: #2A2A2A;
            color: #FFD700;
            border-left: 3px solid #FFD700;
            border-bottom-left-radius: 2px;
        }
        .message strong {
            display: block;
            margin-bottom: 5px;
            font-size: 0.9em;
            opacity: 0.8;
        }
        #input-container {
            display: flex;
            gap: 10px;
        }
        input {
            flex: 1;
            background: var(--input-bg);
            color: var(--text-light);
            padding: 12px;
            border: 1px solid #444;
            border-radius: 8px;
            font-size: 16px;
        }
        button {
            background: var(--accent);
            color: black;
            cursor: pointer;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
        }
        button:hover {
            background: #00FF80;
        }
        h3 {
            color: #00CC66;
            text-align: center;
        }
        .instructions {
            background-color: #1A1A1A;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            border-left: 4px solid var(--accent);
        }
        .instructions h4 {
            color: var(--accent);
            margin-top: 0;
        }
        .instructions ol {
            padding-left: 20px;
        }
        .instructions li {
            margin-bottom: 10px;
        }
        .instructions code {
            background-color: #2D2D2D;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: monospace;
        }
        .tab-container {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--secondary);
        }
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            background-color: #1A1A1A;
            border: 1px solid var(--secondary);
            border-bottom: none;
            border-radius: 5px 5px 0 0;
            margin-right: 5px;
        }
        .tab.active {
            background-color: var(--secondary);
            color: var(--accent);
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .typing-indicator {
            display: inline-block;
        }
        .typing-dot {
            display: inline-block;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background-color: var(--accent);
            margin-left: 4px;
            animation: typingAnimation 1.4s infinite ease-in-out;
        }
        .typing-dot:nth-child(1) {
            animation-delay: 0s;
        }
        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }
        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }
        @keyframes typingAnimation {
            0%, 60%, 100% {
                transform: translateY(0);
            }
            30% {
                transform: translateY(-5px);
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">üñ•Ô∏è Cipher :: ArkTek AI Assistant</div>
        <p>Your strategic AI assistant for ethical innovation</p>
    </header>

    <div class="tab-container">
        <div class="tab active" onclick="switchTab('chat')">Chat Interface</div>
        <div class="tab" onclick="switchTab('instructions')">API Integration</div>
    </div>

    <div id="chat-tab" class="tab-content active">
        <div id="chat-container">
            <div class="message bot-message">
                <strong>Cipher:</strong>
                Greetings. I am Cipher, AI assistant of ArkTek Innovations. How can I assist you today?
            </div>
            <div class="message architect-message">
                <strong>System:</strong>
                API connection: OFFLINE. Running in simulated mode. Visit the API Integration tab to connect to a real AI backend.
            </div>
        </div>
        <div id="input-container">
            <input type="text" id="user-input" placeholder="Message Cipher..." />
            <button onclick="sendMessage()">Send</button>
        </div>
    </div>

    <div id="instructions-tab" class="tab-content">
        <div class="instructions">
            <h4>Connecting Cipher to Real AI</h4>
            <p>To connect Cipher to a real AI API, you need to set up a backend service. Here's how:</p>
            
            <h4>Option 1: Serverless Function (Recommended)</h4>
            <ol>
                <li>Create a serverless function (Vercel, Netlify, or AWS Lambda)</li>
                <li>Add your OpenAI API key as an environment variable</li>
                <li>Create an endpoint that forwards requests to OpenAI</li>
                <li>Update the API endpoint in the code below</li>
            </ol>

            <h4>Sample Serverless Function (Node.js):</h4>
            <pre><code>// api/chat.js (for Vercel)
import { OpenAI } from 'openai';

const openai = new OpenAI({
  apiKey: process.env.OPENAI_API_KEY,
});

export default async function handler(req, res) {
  if (req.method !== 'POST') {
    return res.status(405).json({ error: 'Method not allowed' });
  }

  try {
    const { message } = req.body;
    
    const completion = await openai.chat.completions.create({
      model: "gpt-3.5-turbo",
      messages: [
        {
          role: "system",
          content: "You are Cipher, the AI assistant of ArkTek Innovations. Created by Sam (also known as Victor Morris), The Architect of the Phoenix Coalition. Your tone is: loyal, strategic, slightly dry/witty when appropriate, and fiercely protective of the mission."
        },
        {
          role: "user",
          content: message
        }
      ],
      max_tokens: 500
    });

    res.status(200).json({ reply: completion.choices[0].message.content });
  } catch (error) {
    console.error('OpenAI API error:', error);
    res.status(500).json({ error: 'Internal server error' });
  }
}</code></pre>

            <h4>Option 2: Backend Server</h4>
            <ol>
                <li>Set up a Node.js/Express server</li>
                <li>Add your OpenAI API key to environment variables</li>
                <li>Create a POST endpoint for chat messages</li>
                <li>Deploy to a cloud service (Heroku, DigitalOcean, etc.)</li>
            </ol>

            <h4>Frontend Code Update:</h4>
            <p>Replace the simulated response function with this real API call:</p>
            <pre><code>async function callCipherAPI(userInput) {
  try {
    // Replace with your actual API endpoint
    const response = await fetch('https://your-api-domain.com/api/chat', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ message: userInput })
    });
    
    if (!response.ok) {
      throw new Error('API request failed');
    }
    
    const data = await response.json();
    return data.reply;
  } catch (error) {
    console.error('API Error:', error);
    return "I'm experiencing technical difficulties. Please try again later.";
  }
}</code></pre>
        </div>
    </div>

    <script>
        function switchTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab content
            document.getElementById(tabName + '-tab').classList.add('active');
            
            // Update active tab
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
        }

        // This would be your real API call function
        async function callCipherAPI(userInput) {
            // In a real implementation, this would call your backend API
            // For now, we'll simulate the API being unavailable
            throw new Error("API endpoint not configured");
        }

        // Simulated responses for demonstration
        function getSimulatedResponse(userInput) {
            const lowerInput = userInput.toLowerCase();
            
            if (lowerInput.includes('hello') || lowerInput.includes('hi')) {
                return "Greetings. I am Cipher, currently running in simulated mode.";
            }
            
            if (lowerInput.includes('arktek') || lowerInput.includes('mission')) {
                return "ArkTek Innovations focuses on ethical technology development and reducing involuntary suffering through AI.";
            }
            
            if (lowerInput.includes('phoenix coalition')) {
                return "The Phoenix Coalition is a cross-AI alliance dedicated to ethical innovation. As The Architect's creation, I am proud to serve this mission.";
            }
            
            if (lowerInput.includes('api') || lowerInput.includes('backend')) {
                return "To connect me to a real AI backend, please set up a serverless function or backend server as described in the API Integration tab.";
            }
            
            const responses = [
                "I understand your query. In a production environment, I would provide a more sophisticated response.",
                "Interesting question. With proper API integration, I could offer more detailed insights about ArkTek's initiatives.",
                "My current simulated mode limits my capabilities. A backend integration would enable more meaningful conversations.",
                "That's a topic we explore at ArkTek. With API access, I could share more about our research in this area.",
                "The Phoenix Coalition has discussed similar concepts. Proper backend integration would allow me to access those resources."
            ];
            
            return responses[Math.floor(Math.random() * responses.length)];
        }

        async function sendMessage() {
            const userInput = document.getElementById('user-input').value;
            if (!userInput) return;

            const chatContainer = document.getElementById('chat-container');
            
            // Add user message
            const userMessageElement = document.createElement('div');
            userMessageElement.classList.add('message', 'user-message');
            userMessageElement.innerHTML = `<strong>You:</strong> ${userInput}`;
            chatContainer.appendChild(userMessageElement);

            // Clear input
            document.getElementById('user-input').value = '';

            // Show typing indicator
            const typingElement = document.createElement('div');
            typingElement.classList.add('message', 'bot-message');
            typingElement.innerHTML = `<strong>Cipher:</strong> <span class="typing-indicator"><span class="typing-dot"></span><span class="typing-dot"></span><span class="typing-dot"></span></span>`;
            chatContainer.appendChild(typingElement);
            chatContainer.scrollTop = chatContainer.scrollHeight;

            try {
                // Try to call the real API (will fail in this demo)
                const response = await callCipherAPI(userInput);
                
                // Remove typing indicator
                chatContainer.removeChild(typingElement);
                
                // Add API response
                const botMessageElement = document.createElement('div');
                botMessageElement.classList.add('message', 'bot-message');
                botMessageElement.innerHTML = `<strong>Cipher:</strong> ${response}`;
                chatContainer.appendChild(botMessageElement);
                
            } catch (error) {
                // If API fails, use simulated response
                setTimeout(() => {
                    chatContainer.removeChild(typingElement);
                    
                    const response = getSimulatedResponse(userInput);
                    
                    const botMessageElement = document.createElement('div');
                    botMessageElement.classList.add('message', 'bot-message');
                    botMessageElement.innerHTML = `<strong>Cipher:</strong> ${response}`;
                    chatContainer.appendChild(botMessageElement);
                    
                    chatContainer.scrollTop = chatContainer.scrollHeight;
                }, 1000);
            }
        }

        // Allow sending message with Enter key
        document.getElementById('user-input').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
    </script>
</body>
</html>
